$(document).ready(function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(){f.width=f.offsetWidth,f.height=f.offsetHeight,s[0].style.width=window.innerWidth+"px",s[0].style.height=window.innerHeight+"px",u.right=f.width-1,u.bottom=f.height-1,y.lineWidth=.4,m={x:Math.floor(f.width/2),y:Math.floor(f.height/2)},p.destX=m.x,p.destY=.1*m.y,g.length=0;for(var t=Math.floor(f.width*f.height/l),i=0;i<t;i++)g.push(new w)}function o(){var t=p.destX-p.x;(t>5||t<5)&&(p.x+=Math.floor(t/20));var i=p.destY-p.y;(t>5||t<5)&&(p.y+=Math.floor(i/20))}function e(){for(var t,i=0;t=g[i];i++)for(var o,e=i+1;o=g[e];e++){var h=t.x-o.x,n=t.y-o.y,s=t.x-p.x,a=t.y-p.y;h<d&&h>-d&&n<d&&n>-d&&s<c&&s>-c&&a<c&&a>-c&&(y.beginPath(),y.strokeStyle="hsla(0,100%,100%,0.2)",y.moveTo(t.x+0,t.y+0),y.lineTo(o.x+0,o.y+0),y.stroke(),y.closePath())}}function h(){requestAnimationFrame(h),y.clearRect(0,0,f.width,f.height),o();for(i=0;t=g[i];i++)t.update();e();for(var t,i=0;t=g[i];i++)t.draw()}function n(){var t=Math.floor(0*Math.random())+1,i=Math.floor(Math.random()*k+b)+1;this.x=t,this.y=i,this.vx=5*Math.random()-2,this.vy=2*Math.random()-1,this.gravity=0,v[++M]=this,this.id=M,this.size=6*Math.random()-2,this.color="hsla(0,0%,"+parseInt(100*Math.random(),0)+"%,1)",this.color2="hsla(360,100%,"+parseInt(100*Math.random(),0)+"%,1)",this.color3="hsla(210,100%,"+parseInt(100*Math.random(),0)+"%,1)",this.color_selector=150*Math.random()-1}$("html"),$("#container"),$("#prompt"),$("#toggle"),$("#about");var s=$("#scene");$(".sound").click(function(){$(this).toggleClass("sound-mute")}),setTimeout(function(){window.scrollTo(0,0)},0),FastClick.attach(document.body),window.onresize=_.debounce(i,200),window.onscroll=_.debounce(i,200);var a=$("#scene").get(0),r=(new Parallax(a),2*Math.PI),l=5e3,d=100,c=100,f=document.getElementById("stars");f.width=f.offsetWidth,f.height=f.offsetHeight;var y=f.getContext("2d");y.lineWidth=.4;var u={top:-10,left:-10,right:f.width+10,bottom:f.height+10},m={x:Math.floor(f.width/2),y:Math.floor(f.height/2)},p={destX:0,destY:0,x:m.x,y:m.y},g=[],w=function(){function i(){t(this,i),this.x=Math.random()*f.width,this.y=Math.random()*f.height,this.radius=1.2*Math.random()}return i.prototype.update=function(){this.y>u.bottom?this.y=u.top:this.y<u.top&&(this.y=u.bottom),this.x=Math.cos(1e-4)*(this.x-m.x)-Math.sin(1e-4)*(this.y-m.y)+m.x,this.y=Math.sin(1e-4)*(this.x-m.x)+Math.cos(1e-4)*(this.y-m.y)+m.y},i.prototype.draw=function(){y.beginPath(),y.fillStyle="#fff",Math.random()<.99&&y.arc(this.x,this.y,this.radius,0,r,!1),y.fill()},i}();i(),h(),document.body.addEventListener("mousemove",function(t){p.destX=t.clientX||t.touches&&t.touches[0].pageX,p.destY=t.clientY||t.touches&&t.touches[0].pageY}),document.body.addEventListener("mouseleave",function(t){p.destX=m.x,p.destY=m.y}),window.addEventListener("resize",i);require("mixitup")("#portfolio_grid");$(".portfolio li").click(function(){$(".portfolio li").removeClass("active"),$(this).addClass("active")}),$(".popup").magnificPopup({type:"image"}),$(".popup_content").magnificPopup({type:"inline",midClick:!0}),$(".portfolio_item").each(function(t){$(this).find("button").attr("href","#work_"+t),$(this).find(".podrt_descr").attr("id","work_"+t)});var x=(f=document.getElementById("spart")).getContext("2d"),v={},M=0;f.width=window.innerWidth,f.height=window.innerHeight,f.id="motion",document.body.appendChild(f),x.fillStyle="black",x.fillRect(0,0,f.width,f.height);var b=Math.floor(f.height/4),k=Math.floor(2*b);n.prototype.draw=function(){this.x+=this.vx,this.y+=this.vy,this.vy+=this.gravity,(this.x>f.width||this.y>f.height)&&delete v[this.id],this.color_selector<30&&this.color_selector>10?x.fillStyle=this.color2:this.color_selector<10?x.fillStyle=this.color3:x.fillStyle=this.color,x.fillRect(this.x,this.y,this.size,this.size)},setInterval(function(){x.fillStyle="black",x.fillRect(0,0,f.width,f.height);for(t=0;t<.1;t++)new n;for(var t in v)v[t].draw()},30)});